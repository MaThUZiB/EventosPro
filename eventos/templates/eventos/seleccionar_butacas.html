{% extends 'core.html' %}
{% load static %}

{% block content %}
<div class="max-w-4xl mx-auto py-10 text-white">

  <h2 class="text-3xl font-bold mb-6">Selecciona tus Asientos</h2>

  <p class="text-gray-300 mb-4">
    {{ funcion.evento.nombre }}<br>
    {{ funcion.fecha }} - {{ funcion.hora }}
  </p>

  <form method="POST">
    {% csrf_token %}

    <div class="bg-gray-800 p-6 rounded-lg shadow-lg inline-block">
      
      {% regroup butacas by fila as filas %}
      {% for fila in filas %}
        <div class="flex items-center space-x-3 mb-3">
          <span class="w-6 text-right text-gray-400">{{ fila.grouper }}</span>

          <div class="flex space-x-2">
            {% for b in fila.list %}
              
              {% if b.disponible %}
                <label class="cursor-pointer">
                  <input type="checkbox" name="butacas" value="{{ b.id }}" class="hidden seat-check">
                  <div class="w-10 h-10 bg-green-600 seat hover:bg-green-700 rounded flex items-center justify-center text-sm font-bold">
                    {{ b.numero }}
                  </div>
                </label>
              {% else %}
                <div class="w-10 h-10 bg-red-600 opacity-60 rounded flex items-center justify-center text-sm font-bold cursor-not-allowed">
                  {{ b.numero }}
                </div>
              {% endif %}

            {% endfor %}
          </div>

        </div>
      {% endfor %}
    </div>

    <button type="submit"
      class="mt-6 inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-semibold">
      Comprar Entradas üéüÔ∏è
    </button>

    <a href="{% url 'eventos:detalle_evento' funcion.evento.id %}"
      class="ml-4 text-gray-400 hover:text-gray-200">
      ‚Üê Volver
    </a>

  </form>

</div>

<style>
  .seat-check:checked + .seat {
    background-color: #2563eb !important; /* Azul */
    transform: scale(1.07);
    transition: 0.15s;
  }
</style>

{% endblock %}
